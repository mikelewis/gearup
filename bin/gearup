#!/usr/bin/env ruby

$:.unshift File.dirname(__FILE__) + '/../lib'

require 'gearup'


opts = Trollop::options do
  version "Gearup (c) 2011 Mike Lewis"
  banner <<-EOS
Gearup Server

Usage:
       prependfile [options]

where [options] are:
  EOS

  opt :config, "Configuration file", :type => String
  #TODO
  opt :workers, "Number of Master Consumers", :default => 1
end
Trollop::die :config, "must supply a configuration file" unless opts[:config]
Trollop::die :config, "must exist" unless File.exist?(opts[:config])

Gearup::CONFIG.merge!(SimpleConf.load(opts[:config]))

p Gearup::CONFIG.job_dir

p opts

# run in Daemon???
Gearup::CommandCenter.start
