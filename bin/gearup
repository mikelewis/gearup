#!/usr/bin/env ruby

$:.unshift File.dirname(__FILE__) + '/../lib'

require 'gearup'

exit unless ARGV.size == 2
exit unless ARGV[0] =~ /^[-+]?[0-9]+$/

num_workers = ARGV[0].to_i
unless num_workers > 0
  puts "Need to enter more than one worker"
  exit
end

job_dir = File.expand_path ARGV[1]
unless File.directory? job_dir
  puts 'Need to enter a valid job directory'
  exit
end

# run in Daemon???
# Use proper command line
Gearup::CommandCenter.start(num_workers, job_dir)
